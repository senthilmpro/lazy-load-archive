(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{43:function(e,t,r){},44:function(e,t,r){},45:function(e,t,r){},46:function(e,t,r){"use strict";r.r(t);var n,a=r(1),c=r(18),s=r.n(c),i=r(3),o=r(4),u=r.n(o),l=r(5),f=r(7),d=r.n(f),p={getImagesData:function(){var e=Object(l.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(t);case 2:return r=e.sent,e.next=5,r.data;case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getIdentifierData:function(){var e=Object(l.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://archive.org/advancedsearch.php?q=creator%3Apix0x&fl%5B%5D=identifier&sort%5B%5D=publicdate+desc&sort%5B%5D=&sort%5B%5D=&rows=50&page=1&output=json&save=yes",e.next=3,d.a.get("https://archive.org/advancedsearch.php?q=creator%3Apix0x&fl%5B%5D=identifier&sort%5B%5D=publicdate+desc&sort%5B%5D=&sort%5B%5D=&rows=50&page=1&output=json&save=yes");case 3:return t=e.sent,e.next=6,t.data;case 6:return r=e.sent,e.abrupt("return",r.response.docs.map((function(e){return e.identifier})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},b=r(0),h=function(e){var t=e.onChange,r=e.loadFirstSite,n=Object(a.useState)(null),c=Object(i.a)(n,2),s=(c[0],c[1],Object(a.useState)(null)),o=Object(i.a)(s,2),u=o[0],l=o[1];return Object(a.useEffect)((function(){p.getIdentifierData().then((function(e){l(e),r(e)}))}),[]),Object(b.jsx)("select",{onChange:t,className:"custom-select custom-select-lg",children:u&&u.map((function(e){return Object(b.jsx)("option",{value:e,children:e})}))})},j=r(8),g=r(9),v=r.n(g),m=new WeakMap;function O(e){e.forEach((function(e){if(m.has(e.target)){var t=m.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(n.unobserve(e.target),m.delete(e.target),t())}}))}function x(){return void 0===n&&(n=new IntersectionObserver(O,{rootMargin:"100px",threshold:"0.15"})),n}r(43);var w=function(e){var t,r,n=e.url,c=e.thumb,s=(e.width,e.height,Object(a.useState)(!1)),o=Object(i.a)(s,2),u=o[0],l=o[1],f=Object(a.useState)(!1),d=Object(i.a)(f,2),p=d[0],h=d[1],g=Object(a.useRef)();t=g,r=function(){h(!0)},Object(a.useEffect)((function(){var e=t.current,n=x();return m.set(e,r),n.observe(e),function(){m.delete(e),n.unobserve(e)}}),[]);return Object(b.jsx)("div",{className:"image-container",ref:g,style:{paddingBottom:"10px",minHeight:"240px"},children:p&&Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:[Object(b.jsx)("img",{className:v()("image","thumb",Object(j.a)({},"isLoaded",!!u)),src:c}),Object(b.jsx)("img",{className:v()("image",Object(j.a)({},"isLoaded",!!u)),src:c,onLoad:function(){l(!0)}})]})})})},D={getArchiveUrl:function(e){return"https://archive.org/metadata/".concat(e)},parseArchiveData:function(e){if(!e)return null;var t=e.files,r=e.metadata,n=e.server,a=e.dir;return{metadata:r,sourceFiles:t.filter((function(e){return"original"==e.source})),thumbs:t.map((function(e){return"derivative"===e.source&&"Thumbnail"===e.format})),server:n,dir:a}},getIdentifierCreator:function(e){return"https://archive.org/advancedsearch.php?q=creator%3Apix0x&fl%5B%5D=identifier&sort%5B%5D=publicdate+desc&sort%5B%5D=&sort%5B%5D=&rows=50&page=1&output=json&callback=callback&save=yes"}},B=function(e){var t=e.selectedIdentifier,r=Object(a.useState)(null),n=Object(i.a)(r,2),c=(n[0],n[1]),s=Object(a.useState)(null),o=Object(i.a)(s,2),f=(o[0],o[1],Object(a.useState)(null)),d=Object(i.a)(f,2),h=d[0],j=d[1],g=function(){var e=Object(l.a)(u.a.mark((function e(){var r,n,a,s,i,o,l,f,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,n=D.getArchiveUrl(r),e.next=4,p.getImagesData(n);case 4:a=e.sent,s=D.parseArchiveData(a),i=s.sourceFiles,o=s.dir,l=s.server,f=i.filter((function(e){return"JPEG"==e.format})),d=f.map((function(e){return{img:"https://i0.wp.com/".concat(l,"/").concat(o,"/").concat(e.name),thumb:"https://i0.wp.com/".concat(l,"/").concat(o,"/").concat(e.name,"?w=320")}})),console.log(d),j(d),console.log(i),c(a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){g()}),[t]),h&&h.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(w,{url:e.img,thumb:e.thumb,width:640,height:480},e.img)})}))},I=["pix0x-57d723e9","pix0x-257ae802","2021-8-16-pix0x-d84c36573d37"],y=function(){var e=Object(a.useState)(I[0]),t=Object(i.a)(e,2),r=t[0],n=t[1];return Object(b.jsxs)("section",{children:[Object(b.jsx)(h,{onChange:function(e){console.log(e.target.value),n(e.target.value)},loadFirstSite:function(e){n(e[0])}}),Object(b.jsx)("div",{className:"ImageGallery",children:Object(b.jsx)(B,{selectedIdentifier:r})})]})};r(44),r(45);function S(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Lazy Load Images"}),Object(b.jsx)(y,{})]})}s.a.render(Object(b.jsx)(S,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.6da63312.chunk.js.map